<!DOCTYPE html>
<html lang="ja">
<head>
  <title>ãƒã‚±ãƒ¢ãƒ³ã‚¯ã‚¤ã‚º</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2.0.6/css/pico.min.css">
  <style>
    html, body {
  height: 100%;      /* é«˜ã•ã‚’ç”»é¢ã„ã£ã±ã„ã« */
  margin: 0;         /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä½™ç™½ã‚’æ¶ˆã™ */
}
body {
  display: flex;              /* Flexbox ã«ã™ã‚‹ */
  justify-content: center;    /* æ¨ªæ–¹å‘ä¸­å¤® */
  align-items: center;        /* ç¸¦æ–¹å‘ä¸­å¤® */
  background: linear-gradient(135deg, #ffefd5, #ffe4e1);
  font-family: "Comic Sans MS", "Arial Rounded MT Bold", sans-serif;
  text-align: center;         /* æ®‹ã—ã¦ã‚‚OK */
}
    h1 {
      font-size: 2.5em;
      color: #ff4500;
      text-shadow: 2px 2px 0px #fff;
      animation: fadeInDown 1s ease-out;
    }
    #pokemon {
  width: 320px;
  background: #fff8dc;
  border-radius: 20px;
  padding: 20px;
  box-shadow: 4px 4px 12px rgba(0,0,0,0.2);
  animation: popIn 0.8s ease-out;
}

    #pokemonName {
      font-size: 2em;
      color: #ff7f50;
    }
    #pokemonEnglishName {
      font-size: 1.2em;
      color: #555;
    }
    #pokemonImage {
      width: 80%;
      margin: 10px auto;
      display: block;
      background: #f0f8ff;
      border-radius: 15px;
      padding: 10px;
      opacity: 0;                    /* â˜… åˆæœŸã¯é€æ˜ */
      transition: opacity 600ms ease-in; /* â˜… ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ç”¨ */
    }
    button {
      font-size: 1.2em;
      padding: 10px 20px;
      border-radius: 15px;
      background: #ff69b4;
      border: none;
      color: white;
      cursor: pointer;
      margin-top: 15px;
      transition: transform 0.2s ease;
    }
    button:hover { background: #ff1493; transform: scale(1.05); }

    /* â˜… ç­”ãˆè¡¨ç¤ºãƒ»ã‚«ãƒ¼ãƒ‰ç™»å ´ãƒ»ãƒœã‚¿ãƒ³å¼¾ã¿ãƒ»åå‰ãƒãƒƒãƒ—ç”¨ */
    #answer { margin-top: 10px; font-weight: bold; color: #ff4500; display: none; }
    .reveal { display: block !important; animation: popIn 0.6s ease-out; } /* ç­”ãˆç”¨ */
    .fade-in { opacity: 1 !important; }        /* ç”»åƒãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ */
    .pop { animation: popIn 0.45s ease-out; }  /* è¦‹å‡ºã—ã®ãƒãƒƒãƒ— */
    .bounce { animation: bounce 0.35s ease-out; } /* ãƒœã‚¿ãƒ³ã®å¼¾ã¿ */

    /* â˜… ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ  */
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-30px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    @keyframes popIn {
      0%   { transform: scale(0.7); opacity: 0; }
      100% { transform: scale(1);   opacity: 1; }
    }
    @keyframes bounce {
      0%   { transform: scale(1); }
      30%  { transform: scale(0.95); }
      60%  { transform: scale(1.06); }
      100% { transform: scale(1); }
    }

    /* â˜… å‹•ãã‚’è‹¦æ‰‹ã¨ã™ã‚‹ç’°å¢ƒã¸ã®é…æ…®ï¼ˆä»»æ„ï¼‰ */
    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; transition: none !important; }
      #pokemonImage { opacity: 1; }
    }
  </style>
</head>
<body>

<main class="container">
  
  <h1>ğŸ¦Š ãƒã‚±ãƒ¢ãƒ³ã‚¯ã‚¤ã‚º ğŸ¦Š</h1>
  
  <div id="pokemon">
    <h2 id="pokemonName">ï¼Ÿï¼Ÿï¼Ÿ</h2>
    <p id="pokemonEnglishName"></p>
    <img id="pokemonImage" src="">
    <button id="newPokemon">ã»ã‹ã®ãƒã‚±ãƒ¢ãƒ³ï¼</button>

    <div id="quiz">
      ã‚‚ã‚“ã ã„ï¼
      <br> ã“ã®ãƒã‚±ãƒ¢ãƒ³ã®åå‰ã¯ãªã‚“ã§ã—ã‚‡ã†ï¼Ÿ
      <br>
      <button id="showAnswer">ã“ãŸãˆã‚’ã¿ã‚‹</button>
      <p id="answer"></p>
    </div>
  </div>
</main>

<script>
  const pokemonName = document.getElementById('pokemonName');
  const pokemonNameEnglish = document.getElementById('pokemonEnglishName');
  const pokemonImage = document.getElementById('pokemonImage');
  const answer = document.getElementById('answer');
  const btnNew = document.getElementById('newPokemon');       // â˜…
  const btnAnswer = document.getElementById('showAnswer');    // â˜…

  async function loadPokemon() {
    try {
      let pokemonNumber = Math.floor(Math.random() * 25) + 1;

      // åŸºæœ¬ãƒ‡ãƒ¼ã‚¿
      const res = await fetch(`https://pokeapi.co/api/v2/pokemon/${pokemonNumber}`);
      const data = await res.json();

      // â˜… ç”»åƒã¯ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ã‹ã‚‰å·®ã—æ›¿ãˆ â†’ æ¯å›ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³
      const url = data.sprites.front_default || "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/0.png";
      pokemonImage.classList.remove('fade-in');       // ãƒªã‚»ãƒƒãƒˆ
      const pre = new Image();
      pre.onload = () => {
        pokemonImage.src = url;
        // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç¢ºå®šå¾Œã«ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ï¼ˆå†ç”Ÿã‚’ç¢ºå®Ÿã«ã™ã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ï¼‰
        requestAnimationFrame(() => pokemonImage.classList.add('fade-in'));
      };
      pre.src = url;

      // åå‰ãƒ‡ãƒ¼ã‚¿
      const res2 = await fetch(`https://pokeapi.co/api/v2/pokemon-species/${pokemonNumber}`);
      const speciesData = await res2.json();

      let japaneseName = speciesData.names.find(n => n.language.name === "ja-Hrkt")
                       || speciesData.names.find(n => n.language.name === "ja");
      let englishName = speciesData.names.find(n => n.language.name === "en");

      if (japaneseName) {
      pokemonName.textContent = "ï¼Ÿï¼Ÿï¼Ÿ"; // æœ€åˆã¯éš ã™
      pokemonName.dataset.answer = japaneseName.name;
     } else {
      pokemonName.textContent = "(æ—¥æœ¬èªåãªã—)";
      pokemonName.dataset.answer = "";
    }


      pokemonNameEnglish.textContent = englishName ? `English: ${englishName.name}` : "(è‹±èªåãªã—)";

      // â˜… ç­”ãˆã¯éè¡¨ç¤ºï¼†ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ
      answer.classList.remove("reveal");
      pokemonName.classList.remove("pop");
      // å¼·åˆ¶å†è¨ˆç®—ã§æ¬¡å›ã‚¢ãƒ‹ãƒ¡ã‚’ç¢ºå®Ÿã«å†ç”Ÿ
      void pokemonName.offsetWidth;
    } catch (error) {
      console.error("ã‚¨ãƒ©ãƒ¼:", error);
      pokemonName.textContent = "ãƒã‚±ãƒ¢ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ";
    }
  }

  // åˆå›ãƒ­ãƒ¼ãƒ‰
  loadPokemon();

  // â˜… ãƒœã‚¿ãƒ³ã®å¼¾ã‚€ã‚¢ãƒ‹ãƒ¡
  function bounceOnce(e) {
    const btn = e.currentTarget;
    btn.classList.remove('bounce');
    void btn.offsetWidth;    // ã‚¢ãƒ‹ãƒ¡å†å§‹å‹•ã®å°æŠ€
    btn.classList.add('bounce');
  }
  btnNew.addEventListener("click", (e) => { bounceOnce(e); loadPokemon(); });
  btnAnswer.addEventListener("click", (e) => {
  bounceOnce(e);
  // ç­”ãˆè¡¨ç¤ºï¼ˆåå‰è¦‹å‡ºã—ã‚’ãƒãƒƒãƒ—è¡¨ç¤ºï¼‰
  pokemonName.textContent = pokemonName.dataset.answer || "ï¼Ÿï¼Ÿï¼Ÿ";
  pokemonName.classList.remove("pop");
  void pokemonName.offsetWidth; // å†å§‹å‹•
  pokemonName.classList.add("pop");
});
</script>

</body>
</html>
