<!DOCTYPE html>
<html lang="ja">
<head>
  <title>„Éù„Ç±„É¢„É≥„ÇØ„Ç§„Ç∫</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2.0.6/css/pico.min.css">
  <style>
    body {
      background: linear-gradient(135deg, #ffefd5, #ffe4e1);
      text-align: center;
      font-family: "Comic Sans MS", "Arial Rounded MT Bold", sans-serif;
    }
    h1 {
      font-size: 2.5em;
      color: #ff4500;
      text-shadow: 2px 2px 0px #fff;
    }
    #pokemon {
      width: 320px;
      margin: auto;
      background: #fff8dc;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 4px 4px 12px rgba(0,0,0,0.2);
    }
    #pokemonName {
      font-size: 2em;
      color: #ff7f50;
    }
    #pokemonEnglishName {
      font-size: 1.2em;
      color: #555;
    }
    #pokemonImage {
      width: 80%;
      margin: 10px auto;
      display: block;
      background: #f0f8ff;
      border-radius: 15px;
      padding: 10px;
    }
    button {
      font-size: 1.2em;
      padding: 10px 20px;
      border-radius: 15px;
      background: #ff69b4;
      border: none;
      color: white;
      cursor: pointer;
      margin-top: 15px;
    }
    button:hover {
      background: #ff1493;
    }
    #quiz {
      margin-top: 20px;
      font-size: 1.2em;
      color: #333;
    }
    #answer {
      margin-top: 10px;
      font-weight: bold;
      color: #ff4500;
    }
  </style>
</head>
<body>

<main class="container">
  <h1>ü¶ä „Éù„Ç±„É¢„É≥„ÇØ„Ç§„Ç∫ ü¶ä</h1>
  
  <div id="pokemon">
    <h2 id="pokemonName">ÔºüÔºüÔºü</h2>
    <p id="pokemonEnglishName"></p>
    <img id="pokemonImage" src="">
    <button id="newPokemon">„Åª„Åã„ÅÆ„Éù„Ç±„É¢„É≥ÔºÅ</button>

    <div id="quiz">
      „ÇÇ„Çì„Å†„ÅÑÔºÅ
      <br> „Åì„ÅÆ„Éù„Ç±„É¢„É≥„ÅÆÂêçÂâç„ÅØ„Å™„Çì„Åß„Åó„Çá„ÅÜÔºü
      <br>
      <button id="showAnswer">„Åì„Åü„Åà„Çí„Åø„Çã</button>
      <p id="answer" style="display:none;"></p>
    </div>
  </div>
</main>

<script>
  const pokemonName = document.getElementById('pokemonName');
  const pokemonNameEnglish = document.getElementById('pokemonEnglishName');
  const pokemonImage = document.getElementById('pokemonImage');
  const answer = document.getElementById('answer');

  async function loadPokemon() {
    try {
      let pokemonNumber = Math.floor(Math.random() * 25) + 1;

      // Âü∫Êú¨„Éá„Éº„Çø
      const res = await fetch(`https://pokeapi.co/api/v2/pokemon/${pokemonNumber}`);
      const data = await res.json();

      // ÁîªÂÉèÔºànull „ÅÆÂ†¥Âêà„ÅØ‰ª£Êõø„Ç§„É©„Çπ„ÉàÔºâ
      pokemonImage.src = data.sprites.front_default || "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/0.png";

      // ÂêçÂâç„Éá„Éº„Çø
      const res2 = await fetch(`https://pokeapi.co/api/v2/pokemon-species/${pokemonNumber}`);
      const speciesData = await res2.json();

      // Êó•Êú¨Ë™ûÂêçÔºàja-Hrkt „Åæ„Åü„ÅØ jaÔºâ
      let japaneseName = speciesData.names.find(n => n.language.name === "ja-Hrkt")
                      || speciesData.names.find(n => n.language.name === "ja");
      let englishName = speciesData.names.find(n => n.language.name === "en");

      if (japaneseName) {
        pokemonName.textContent = "ÔºüÔºüÔºü"; // „ÇØ„Ç§„Ç∫Áî®
        answer.textContent = japaneseName.name;
      } else {
        pokemonName.textContent = "(Êó•Êú¨Ë™ûÂêç„Å™„Åó)";
        answer.textContent = "";
      }

      if (englishName) {
        pokemonNameEnglish.textContent = `English: ${englishName.name}`;
      } else {
        pokemonNameEnglish.textContent = "(Ëã±Ë™ûÂêç„Å™„Åó)";
      }

      answer.style.display = "none"; // Êñ∞„Åó„ÅÑ„Éù„Ç±„É¢„É≥„Åß„ÅØÁ≠î„ÅàÈùûË°®Á§∫
    } catch (error) {
      console.error("„Ç®„É©„Éº:", error);
      pokemonName.textContent = "„Éù„Ç±„É¢„É≥„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü";
    }
  }

  // ÂàùÂõû„É≠„Éº„Éâ
  loadPokemon();

  // „Éú„Çø„É≥„Ç§„Éô„É≥„Éà
  document.getElementById("newPokemon").addEventListener("click", loadPokemon);
  document.getElementById("showAnswer").addEventListener("click", () => {
    answer.style.display = "block";
    pokemonName.textContent = answer.textContent;
  });
</script>

</body>
</html>
